SubDir PLASMA NDDL test compiler ;

if ! $(PLASMA_READY) {

local compiler_test = no-world.nddl ;
local hh = $(compiler_test:S=.hh) ;
local cc = $(compiler_test:S=.cc) ;
LocalDepends nddl-tests : $(hh) $(cc) ;
NddlCompiler $(hh) $(cc) : $(compiler_test) ;

ModuleObjects NddlMain.cc : NDDL ;

local model ;

for model in
	class-constructor.nddl   multi-resources.nddl   simple-rules.nddl
	existential.nddl         plasma-base.nddl       subclass.nddl
	guards.nddl              simple-class.nddl constraints.nddl
	interval-constants.nddl  simple-predicate.nddl
	less-basic-model.nddl    simple-resources.nddl foreach.nddl
	gnats-2537.nddl
{
  local exe = $(model:S=) ;
  NddlMain $(exe) : NddlMain.o : $(model) : NDDL ;
  RunModuleMain run-$(exe) : $(exe) ;
  LocalDepends run-nddl-tests : run-$(exe) ;
}

} # PLASMA_READY

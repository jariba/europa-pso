PROJECT_ROOT ?= $(TOP) ;
SubDir $(PROJECT_ROOT) Tower ;

if ! $(Tower_READY) {
 # Declare a library for PlanWorks Control

 ModuleSharedLibrary TowerController 
     : $(PLASMA_HOME)/ControllerStub.cc $(PLASMA_HOME)/MasterController.cc $(PLASMA_HOME)/SingleSolverController.cc 
     : System : TowerController ;

 # Create a build target to run a problem
 RunNDDLProblem Tower : Tower-initial-state.nddl : Tower-planner : PlannerConfig.xml ;

 # Create a build target for the planner executable with the given model.
 NddlMain Tower-planner : Tower-Main.cc : Tower-model.nddl : System : Tower-planner ;

 # Create a build target for the planner shared library with model.
 ModuleSharedLibrary Tower : Tower-model.o : System : Tower ;

 Depends all : run-Tower-tests ;
 Depends run-Tower-tests : Tower ;
 Depends run-Tower-tests : TowerController ;
} # Tower_READY

SubDir %Project% ;

if ! $(%PROJECT%_READY) {
  # Declare a library for PlanWorks Control

  ModuleSharedLibrary %Project%Controller
     : ControllerStub.cc 
     : System : %Project%Controller ;

  # Create a build target to run a problem
  RunNDDLProblem %Project% : %Project%-initial-state.nddl : %Project%-planner : PlannerConfig.xml ;

  # Create a build target for the planner executable with the given model.
  NddlMain %Project%-planner : %Project%-Main.cc : %Project%-model.nddl : System : %Project%-planner ;

  # Create a build target for the planner shared library with model.
  ModuleSharedLibrary %Project% : %Project%-model.o : System : %Project% ;

  NOTFILE %Project% %Project%Controller ;

  # Only let all run Project if we're in this directory:
  if $(SUBDIR) = . {
    Depends all : %Project% %Project%Controller ;
  }
  Depends run-%Project%-tests : %Project% %Project%Controller ;
} # %PROJECT%_READY

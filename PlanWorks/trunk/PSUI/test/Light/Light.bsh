// Light.bsh

import psengine.*;

source("PlanStructure.bsh");
//source("PlanStructuretoPlexilConverter.bsh");

void loadModel()
{
	cwd = bsh.cwd;
    String nddlModel = cwd+"/Light.nddl";
    psengine.executeScript("nddl",nddlModel);
}

void createPlan()
{
	solver = desktop.makeSolver("PlannerConfig.xml", 0, 50);

	while (solver.hasFlaws())
		solver.step();
}

void showPlan()
{
    desktop.showTokens(psengine.getObjectsByType("LightMgr").get(0));
}

PlanStructure makePlanStructure()
{
	return EUROPAtoPlanStructure.translate(psengine.getTokens());	
}

String planStructureToPlexil(PlanStructure ps)
{
	// TODO:
	return "";
}

void main()
{
	loadModel();
    createPlan();
	showPlan();
	PlanStructure ps = makePlanStructure();
	planStructureToPlexil(ps);
}

main();

